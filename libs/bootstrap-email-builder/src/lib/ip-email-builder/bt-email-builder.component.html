<div class="d-flex h-100 col">
  <div class="col-10" [ngSwitch]="screen | async">
    <div class="bg-white shadow-sm border border-b py-3 px-4 w-100 flex gap-2 flex-shrink-0">
      <ng-container *ngIf="value | ipCan: 'preview'">
        <button btBtn (click)="preview()" *ngSwitchDefault>Preview</button>
        <button btBtn (click)="screen.next(null)" *ngSwitchCase="'preview'">Close Preview</button>
      </ng-container>
      <!--      <button btBtn (click)="convert()">Save</button>-->

      <div class="ms-auto">
        <button btBtn ipEmailBuilderHistoryAction="undo">Prev</button>
        <button btBtn ipEmailBuilderHistoryAction="redo">Redo</button>
      </div>
    </div>

    <ng-container *ngSwitchCase="'preview'">
      <ng-container *ngIf="value | ipPreviewLink | async as link; else loading">
        <iframe [src]="link" class="overflow-x-auto flex-1"></iframe>
      </ng-container>
      <ng-template #loading>
        <p i18n="@@template_loading">Loading, please wait ...</p>
      </ng-template>
    </ng-container>

    <bt-email-body *ngSwitchDefault class="overflow-x-auto col-6 m-auto mt-3" [(value)]="value"></bt-email-body>
  </div>
  <bt-email-aside [readonly]="(screen | async) !== null"
                    class="col-2 select-text p-2"></bt-email-aside>
</div>
